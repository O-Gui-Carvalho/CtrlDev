'use client';
import React, { useEffect, useRef, useState } from 'react';
import './menu.css';
import Link from 'next/link';
import gsap from 'gsap';
import { useGSAP } from '@gsap/react';

const menuLinks = [
    {path: '/', label: 'Home'},
    {path: '/', label: 'Projetos'},
    {path: '/', label: 'ServiÃ§os'},
    {path: '/', label: 'Blog'},
    {path: '/', label: 'Contato'},
]

const Menu = () => {
    const container = useRef(null);
    const [isMenuOpen, setIsMenuOpen] = useState(false);

    const tl = useRef(null)

    const toggleMenu = () => {
        setIsMenuOpen(!isMenuOpen);
    };

    useGSAP(() => {
        gsap.set(".menu-link-item-holder", {y: 90});

        tl.current = gsap.timeline({paused: true}).to(".menu-overlay", {
            duration: 1.25,
            clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
            ease: "power3.inOut",
        })
        .to(".menu-link-item-holder", {
            y: 0,
            duration: 1,
            stagger: 0.1,
            ease: 'power3.inOut',
            delay: -0.75,
        })
    }, {scope: container});

    useEffect(() => {
        if (isMenuOpen){
            tl.current.play();
        } else {
            tl.current.reverse();
        }
    }, [isMenuOpen]);

  return (
    <div ref={container} className='menu-container'>
        <div className="menu-bar">
            <div className="menu-logo">
                <Link href='/'>
                    <svg width="126" height="32" viewBox="0 0 126 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clipPath="url(#clip0_81_200)">
                        <path d="M65.3923 3.13622C67.7684 4.38386 69.614 6.15977 70.9181 8.46397C72.2112 10.7682 72.8632 13.4433 72.8632 16.4893C72.8632 19.5353 72.2112 22.1992 70.9181 24.4809C69.614 26.7626 67.7794 28.5161 65.3923 29.7637C63.0051 31.0113 60.2533 31.6295 57.1146 31.6295H46.6708V1.25915H57.1146C60.2533 1.25915 63.0162 1.87735 65.3923 3.12498V3.13622ZM64.1655 23.8515C65.8785 22.1093 66.7295 19.659 66.7295 16.5005C66.7295 13.3421 65.8785 10.8693 64.1655 9.08216C62.4525 7.29501 60.0322 6.40705 56.8935 6.40705H52.6608V26.4704H56.8935C60.0322 26.4704 62.4525 25.6049 64.1655 23.8627V23.8515Z" fill="#E6F7FF"/>
                        <path d="M99.2102 21.4125H81.8812C82.0248 23.1547 82.6216 24.5147 83.6826 25.5039C84.7325 26.493 86.0366 26.9875 87.5728 26.9875C89.7942 26.9875 91.3856 26.0209 92.325 24.0764H98.7902C98.105 26.4031 96.7899 28.3026 94.8558 29.7975C92.9107 31.2924 90.5346 32.0343 87.7054 32.0343C84.8762 32.0343 83.3731 31.5172 81.5607 30.4832C79.7482 29.4491 78.3336 27.9991 77.3279 26.1108C76.3111 24.2225 75.8028 22.0532 75.8028 19.5804C75.8028 17.1076 76.3001 14.8933 77.2947 13.005C78.2894 11.1167 79.6929 9.66675 81.4944 8.65516C83.2958 7.64356 85.3624 7.13776 87.6943 7.13776C90.0262 7.13776 91.9713 7.63232 93.7507 8.62144C95.53 9.61055 96.9225 11.0043 97.9061 12.8252C98.8897 14.6348 99.387 16.7254 99.387 19.0746C99.387 21.4237 99.3317 20.7269 99.2212 21.4238L99.2102 21.4125ZM93.176 17.3212C93.1428 15.7588 92.5902 14.4999 91.5072 13.5558C90.4241 12.6116 89.0979 12.1395 87.5286 12.1395C85.9592 12.1395 84.7988 12.6004 83.7821 13.5108C82.7653 14.4213 82.1464 15.6914 81.9254 17.3212H93.176Z" fill="#E6F7FF"/>
                        <path d="M113.633 26.0324L119.623 7.53141H126L117.225 31.6411H109.953L101.222 7.53141H107.643L113.633 26.0324Z" fill="#E6F7FF"/>
                        <path d="M40.8693 5.92375V23.0085C40.8693 25.3914 39.3441 27.4146 37.2222 28.1114C36.7138 28.28 36.1613 28.37 35.5976 28.37H8.58736C5.68078 28.37 3.31572 25.9646 3.31572 23.0085V5.92375C3.31572 5.26059 3.42624 4.63115 3.64727 4.05791C4.39878 2.02348 6.32177 0.573524 8.58736 0.573524H35.5976C38.5042 0.573524 40.8693 2.97888 40.8693 5.93499V5.92375Z" stroke="#006598" strokeMiterlimit="10"/>
                        <path d="M2.89941 4.93072C2.84513 5.25001 2.81543 5.5782 2.81543 5.91216V22.9961C2.81543 26.2203 5.39636 28.8583 8.58691 28.8585H35.5977C35.8396 28.8584 36.0798 28.8422 36.3164 28.8126C35.4689 30.1789 33.9807 31.0839 32.2822 31.084H5.27148C2.64914 31.084 0.500165 28.9105 0.5 26.2227V9.14849C0.500144 7.34133 1.46599 5.76852 2.89941 4.93072Z" fill="#006598" stroke="#006598"/>
                        <path d="M8.58711 11.5026C9.05128 10.6372 9.70333 9.96276 10.5433 9.47944C11.3832 8.99612 12.3336 8.74884 13.3946 8.74884C14.6987 8.74884 15.8149 9.08604 16.7432 9.78292C17.6716 10.4798 18.2905 11.4352 18.611 12.6379H15.6712C15.4502 12.177 15.1407 11.8286 14.7429 11.5813C14.345 11.334 13.8809 11.2216 13.3725 11.2216C12.5547 11.2216 11.8805 11.5139 11.3721 12.0983C10.8638 12.6828 10.6096 13.4584 10.6096 14.4363C10.6096 15.4141 10.8748 16.1897 11.3832 16.7742C11.8916 17.3587 12.5657 17.6397 13.3835 17.6397C13.8919 17.6397 14.345 17.516 14.7539 17.2687C15.1518 17.0215 15.4612 16.673 15.6823 16.2009H18.622C18.3126 17.4036 17.6937 18.3478 16.7764 19.0446C15.8481 19.7415 14.7429 20.09 13.4388 20.1012C12.3778 20.1012 11.4274 19.8652 10.5875 19.3818C9.74754 18.8985 9.09549 18.2354 8.62027 17.3811C8.14505 16.5269 7.91296 15.549 7.91296 14.4475C7.91296 13.346 8.14505 12.3681 8.60922 11.5026H8.58711Z" fill="#E6F7FF"/>
                        <path d="M25.1094 17.6822V19.9864H23.7611C22.7886 19.9864 22.0371 19.7504 21.4955 19.2671C20.954 18.7837 20.6777 17.9969 20.6777 16.9067V13.3773C20.6666 13.3773 19.6057 13.3773 19.6057 13.3773V11.1181H20.6666V8.96001H23.3301V11.1181H25.0873V13.3773H23.3411V16.9404C23.3522 17.2101 23.4185 17.4012 23.5401 17.5136C23.6616 17.626 23.8716 17.6822 24.17 17.6822H25.1205H25.1094Z" fill="#E6F7FF"/>
                        <path d="M30.4144 11.4336C30.8785 11.1526 31.398 11.0064 31.9726 11.0064V13.8839H31.2432C30.5801 13.8839 30.0828 14.03 29.7513 14.3222C29.4197 14.6145 29.2539 15.1315 29.2539 15.8621V19.9759C29.265 19.9759 26.6015 19.9759 26.6015 19.9759L26.5794 11.1188H29.2539V12.5913C29.5634 12.108 29.9502 11.7146 30.4254 11.4336H30.4144Z" fill="#E6F7FF"/>
                        <path d="M35.9181 8.19617L35.9513 19.9532H33.2768L33.2436 8.20741H35.9181V8.19617Z" fill="#E6F7FF"/>
                        </g>
                        <defs>
                        <clipPath id="clip0_81_200">
                        <rect width="126" height="32" fill="white"/>
                        </clipPath>
                        </defs>
                    </svg>
                </Link>
            </div>
            <div className="menu-open" onClick={toggleMenu}>
                <p>Menu</p>
            </div>
        </div>
        <div className="menu-overlay">
            <div className="menu-overlay-bar">
                <div className="menu-logo">
                    <Link href='/'>
                        <svg width="126" height="32" viewBox="0 0 126 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clipPath="url(#clip0_81_200)">
                            <path d="M65.3923 3.13622C67.7684 4.38386 69.614 6.15977 70.9181 8.46397C72.2112 10.7682 72.8632 13.4433 72.8632 16.4893C72.8632 19.5353 72.2112 22.1992 70.9181 24.4809C69.614 26.7626 67.7794 28.5161 65.3923 29.7637C63.0051 31.0113 60.2533 31.6295 57.1146 31.6295H46.6708V1.25915H57.1146C60.2533 1.25915 63.0162 1.87735 65.3923 3.12498V3.13622ZM64.1655 23.8515C65.8785 22.1093 66.7295 19.659 66.7295 16.5005C66.7295 13.3421 65.8785 10.8693 64.1655 9.08216C62.4525 7.29501 60.0322 6.40705 56.8935 6.40705H52.6608V26.4704H56.8935C60.0322 26.4704 62.4525 25.6049 64.1655 23.8627V23.8515Z" fill="#E6F7FF"/>
                            <path d="M99.2102 21.4125H81.8812C82.0248 23.1547 82.6216 24.5147 83.6826 25.5039C84.7325 26.493 86.0366 26.9875 87.5728 26.9875C89.7942 26.9875 91.3856 26.0209 92.325 24.0764H98.7902C98.105 26.4031 96.7899 28.3026 94.8558 29.7975C92.9107 31.2924 90.5346 32.0343 87.7054 32.0343C84.8762 32.0343 83.3731 31.5172 81.5607 30.4832C79.7482 29.4491 78.3336 27.9991 77.3279 26.1108C76.3111 24.2225 75.8028 22.0532 75.8028 19.5804C75.8028 17.1076 76.3001 14.8933 77.2947 13.005C78.2894 11.1167 79.6929 9.66675 81.4944 8.65516C83.2958 7.64356 85.3624 7.13776 87.6943 7.13776C90.0262 7.13776 91.9713 7.63232 93.7507 8.62144C95.53 9.61055 96.9225 11.0043 97.9061 12.8252C98.8897 14.6348 99.387 16.7254 99.387 19.0746C99.387 21.4237 99.3317 20.7269 99.2212 21.4238L99.2102 21.4125ZM93.176 17.3212C93.1428 15.7588 92.5902 14.4999 91.5072 13.5558C90.4241 12.6116 89.0979 12.1395 87.5286 12.1395C85.9592 12.1395 84.7988 12.6004 83.7821 13.5108C82.7653 14.4213 82.1464 15.6914 81.9254 17.3212H93.176Z" fill="#E6F7FF"/>
                            <path d="M113.633 26.0324L119.623 7.53141H126L117.225 31.6411H109.953L101.222 7.53141H107.643L113.633 26.0324Z" fill="#E6F7FF"/>
                            <path d="M40.8693 5.92375V23.0085C40.8693 25.3914 39.3441 27.4146 37.2222 28.1114C36.7138 28.28 36.1613 28.37 35.5976 28.37H8.58736C5.68078 28.37 3.31572 25.9646 3.31572 23.0085V5.92375C3.31572 5.26059 3.42624 4.63115 3.64727 4.05791C4.39878 2.02348 6.32177 0.573524 8.58736 0.573524H35.5976C38.5042 0.573524 40.8693 2.97888 40.8693 5.93499V5.92375Z" stroke="#006598" strokeMiterlimit="10"/>
                            <path d="M2.89941 4.93072C2.84513 5.25001 2.81543 5.5782 2.81543 5.91216V22.9961C2.81543 26.2203 5.39636 28.8583 8.58691 28.8585H35.5977C35.8396 28.8584 36.0798 28.8422 36.3164 28.8126C35.4689 30.1789 33.9807 31.0839 32.2822 31.084H5.27148C2.64914 31.084 0.500165 28.9105 0.5 26.2227V9.14849C0.500144 7.34133 1.46599 5.76852 2.89941 4.93072Z" fill="#006598" stroke="#006598"/>
                            <path d="M8.58711 11.5026C9.05128 10.6372 9.70333 9.96276 10.5433 9.47944C11.3832 8.99612 12.3336 8.74884 13.3946 8.74884C14.6987 8.74884 15.8149 9.08604 16.7432 9.78292C17.6716 10.4798 18.2905 11.4352 18.611 12.6379H15.6712C15.4502 12.177 15.1407 11.8286 14.7429 11.5813C14.345 11.334 13.8809 11.2216 13.3725 11.2216C12.5547 11.2216 11.8805 11.5139 11.3721 12.0983C10.8638 12.6828 10.6096 13.4584 10.6096 14.4363C10.6096 15.4141 10.8748 16.1897 11.3832 16.7742C11.8916 17.3587 12.5657 17.6397 13.3835 17.6397C13.8919 17.6397 14.345 17.516 14.7539 17.2687C15.1518 17.0215 15.4612 16.673 15.6823 16.2009H18.622C18.3126 17.4036 17.6937 18.3478 16.7764 19.0446C15.8481 19.7415 14.7429 20.09 13.4388 20.1012C12.3778 20.1012 11.4274 19.8652 10.5875 19.3818C9.74754 18.8985 9.09549 18.2354 8.62027 17.3811C8.14505 16.5269 7.91296 15.549 7.91296 14.4475C7.91296 13.346 8.14505 12.3681 8.60922 11.5026H8.58711Z" fill="#E6F7FF"/>
                            <path d="M25.1094 17.6822V19.9864H23.7611C22.7886 19.9864 22.0371 19.7504 21.4955 19.2671C20.954 18.7837 20.6777 17.9969 20.6777 16.9067V13.3773C20.6666 13.3773 19.6057 13.3773 19.6057 13.3773V11.1181H20.6666V8.96001H23.3301V11.1181H25.0873V13.3773H23.3411V16.9404C23.3522 17.2101 23.4185 17.4012 23.5401 17.5136C23.6616 17.626 23.8716 17.6822 24.17 17.6822H25.1205H25.1094Z" fill="#E6F7FF"/>
                            <path d="M30.4144 11.4336C30.8785 11.1526 31.398 11.0064 31.9726 11.0064V13.8839H31.2432C30.5801 13.8839 30.0828 14.03 29.7513 14.3222C29.4197 14.6145 29.2539 15.1315 29.2539 15.8621V19.9759C29.265 19.9759 26.6015 19.9759 26.6015 19.9759L26.5794 11.1188H29.2539V12.5913C29.5634 12.108 29.9502 11.7146 30.4254 11.4336H30.4144Z" fill="#E6F7FF"/>
                            <path d="M35.9181 8.19617L35.9513 19.9532H33.2768L33.2436 8.20741H35.9181V8.19617Z" fill="#E6F7FF"/>
                            </g>
                            <defs>
                            <clipPath id="clip0_81_200">
                            <rect width="126" height="32" fill="white"/>
                            </clipPath>
                            </defs>
                        </svg>
                    </Link> 
                </div>
                <div className="menu-close" onClick={toggleMenu}>
                    <p>Fechar</p>
                </div>
            </div>
            <div className="menu-close-icon">
                <p>&#x2715;</p> 
            </div>
            <div className="menu-copy">
                <div className="menu-links">
                    {menuLinks.map((link, index) => (
                        <div className="menu-links-item" key={index}>
                            <div className="menu-link-item-holder" onClick={toggleMenu}>
                                <Link href={link.path} className='menu-link'>
                                    {link.label}
                                </Link>
                            </div>
                        </div>
                    ))}
                </div>
                <div className="menu-info">
                    <div className="menu-info-col">
                        <a href="#">X &#8599;</a>
                        <a href="#">Instagram &#8599;</a>
                        <a href="#">Linkedin &#8599;</a>
                        <a href="#">Behance &#8599;</a>
                        <a href="#">Dribbble &#8599;</a>
                    </div>
                    <div className="menu-info-col">
                        <p>info@codegrid.com</p>
                        <p>2342 232 343</p>
                    </div>
                </div>
            </div>
            <div className="menu-preview">
                <p>View Showreel</p>
            </div>
        </div>
    </div>
  )
}

export default Menu